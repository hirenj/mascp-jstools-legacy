if("undefined"==typeof GOMap&&(GOMap={}),function(){var a=function(){var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");do c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->";while(d[0]);return b>4?b:a}();a&&(7===a&&(GOMap.IE=!0,GOMap.IE7=!0),8===a&&(GOMap.IE=!0,GOMap.IE8=!0))}(),GOMap.IE&&"undefined"==typeof svgweb&&"undefined"==typeof SVGWEB_LOADING&&!window.svgns){var svg_path="svgweb/";"undefined"!=typeof SVGWEB_PATH&&(svg_path=SVGWEB_PATH);var scriptTag=document.createElement("script");scriptTag.src=svg_path+"svg.js",scriptTag.type="text/javascript",scriptTag.setAttribute("data-path",svg_path),document.getElementsByTagName("head")[0].insertBefore(scriptTag,document.getElementsByTagName("head")[0].firstChild),SVGWEB_LOADING=!0}log="undefined"==typeof log?"undefined"==typeof console?function(){}:function(a){return"String"==typeof a&&1==arguments.length?console.log("%s",a):console.log("%o: %o",a,this),this}:log,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),window.attachEvent?window.onload=function(){GOMap.LOADED=!0}:GOMap.LOADED=!0,GOMap.Diagram=function(a,b){if(null!==a){this._highlighted={},this._styles_cache={},this.enabled=!0;var c=this,d=null;if("string"==typeof a)d=a,a=null;else if(a.nodeName&&"object"==a.nodeName.toLowerCase())d=a.getAttribute("src")||a.getAttribute("data");else if(a.nodeName&&"svg"==a.nodeName.toLowerCase())return void function(){return GOMap.LOADED?(c._container=a.parentNode,c.element=a,c._svgLoaded(),c.loaded=!0,b.load&&b.load.apply(c),void(c.onload&&c.onload.apply(c))):void window.attachEvent("onload",arguments.callee)}();this.element=document.createElement("object",!0),this.element.setAttribute("data",d),this.element.setAttribute("type","image/svg+xml"),this.element.setAttribute("width","100%"),this.element.setAttribute("height","100%"),this.element.setAttribute("style","background: transparent;"),this.element.addEventListener||(this.element.addEventListener=function(a,b){this.attachEvent(a,b)});var e="undefined"!=typeof svgweb;this.element.addEventListener(e?"SVGLoad":"load",function(){var a=this;if(!this.nodeName)return void console.log("The SVG hasn't been loaded properly");null!==a.contentDocument?c.element=a.contentDocument.rootElement:c.element=a.getAttribute("contentDocument").rootElement;var d=a;c.destroy=function(){d&&d.parentNode&&("undefined"!=typeof svgweb?svgweb.removeChild(d,d.parentNode):d.parentNode.removeChild(d))},c._svgLoaded(),c.loaded=!0,b.load&&b.load.apply(c),c.onload&&c.onload.apply(c)},!1),a&&(this.appendTo(a.parentNode),a.parentNode.removeChild(a))}},GOMap.Diagram.prototype.appendTo=function(a){return this._container=a,"undefined"!=typeof svgweb?svgweb.appendChild(this.element,a):a.appendChild(this.element),this},GOMap.Diagram.prototype.showKeyword=function(a,b){var c=this._elementsForKeyword(a);if(0===c.length)return!1;if(this._highlighted[a]&&!b)return!0;b=b||"#ff0000",this._highlighted[a]=!0;for(var d=0;d<c.length;d++)c[d]._highlighted=c[d]._highlighted||{},c[d]._highlighted[b]=!0,"path"!=c[d].nodeName&&"circle"!=c[d].nodeName&&"ellipse"!=c[d].nodeName||this._outlineElement(c[d]);var e=this;return this._recurse(c,function(a){return e._highlightElement(a),!0}),!0},GOMap.Diagram.prototype.zoomToKeyword=function(a){for(var b=this.element,c=this._elementsForKeyword(a),d=null,e=0;e<c.length;e++)if("g"==c[e].nodeName){d=c[e];break}if(!d)return void(b._baseViewBox&&b.setAttribute("viewBox",b._baseViewBox));if(d.getBBox){var f=d.getBBox();b.getBBox();b._baseViewBox||(b._baseViewBox=b.getAttribute("viewBox"));var g=[f.x-10,f.y-10,f.width+20,f.height+20];b.setAttribute("viewBox",g.join(" "))}},GOMap.Diagram.prototype.hideAllKeywords=function(){for(var a in this._highlighted)this._highlighted.hasOwnProperty(a)&&this.hideKeyword(a)},GOMap.Diagram.prototype.hideKeyword=function(a,b){var c=this._elementsForKeyword(a),d=this;this._highlighted[a]=!1,this._recurse(c,function(a){null!==b&&a._highlighted?a._highlighted[b]=!1:a._highlighted={};for(var c in a._highlighted)if(a._highlighted[c]===!0)return"path"!=a.nodeName&&"circle"!=a.nodeName&&"ellipse"!=a.nodeName||d._outlineElement(a),!1;return d._restoreStyle(a),!0})},GOMap.Diagram.prototype.toggleKeyword=function(a,b){return this._highlighted[a]?(this.hideKeyword(a),!1):this.showKeyword(a,b)},GOMap.Diagram.prototype.clearMarkers=function(a){if(this.markers){if(a)return void this._clearMarkers(this.markers[a]);for(var b in this.markers)this.markers.hasOwnProperty(b)&&this._clearMarkers(this.markers[b]);this.markers={}}},GOMap.Diagram.prototype._clearMarkers=function(a){if(a)for(var b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b])},GOMap.Diagram.prototype.addMarker=function(a,b){this.markers||(this.markers={}),b||(b=1);var c,d=this.element;if(this.markers[a])for(this.markers[a].current_radius+=b,c=0;c<this.markers[a].length;c++)this.markers[a][c].setAttribute("r",this.markers[a].current_radius);else{var e=this._elementsForKeyword(a);for(this.markers[a]=[],this.markers[a].current_radius=b,c=0;c<e.length;c++){var f=e[c];if("g"==f.nodeName){var g=f.getBBox(),h=g.x+g.width/2,i=g.y+g.height/2;circle=document.createElementNS(svgns,"circle"),circle.setAttribute("cx",h),circle.setAttribute("cy",i),circle.setAttribute("r",this.markers[a].current_radius),circle.setAttribute("fill","#ff0000"),this.markers[a].push(circle),d.appendChild(circle)}}}},GOMap.Diagram.prototype.addEventListener=function(a,b){this._events||(this._events={}),this._events[a]||(this._events[a]=[]),this._events[a].push(b)},function(){var a=function(){if(this._events&&this._events.zoomChange)for(var a=0;a<this._events.zoomChange.length;a++)this._events.zoomChange[a].apply(this,[{type:"zoomChange"}])},b={setZoom:function(b){0>b&&(b=0),this.element&&(this.element.currentScale=b),a.apply(this)},getZoom:function(){return this.element.currentScale}};Object.defineProperty&&!MASCP.IE8&&Object.defineProperty(GOMap.Diagram.prototype,"zoom",{get:b.getZoom,set:b.setZoom})}(),GOMap.Diagram.prototype.makeInteractive=function(){var a=this.element,b=this._container;try{a.addEventListener}catch(c){return void console.log("Browser does not support addEventListener")}(new GOMap.Diagram.Dragger).applyToElement(a);var d=GOMap.Diagram.addZoomControls(this,.1,2,.1,1);b.appendChild(d),d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.height="30%"},GOMap.Diagram.prototype._svgLoaded=function(){this._forceOpacity()},GOMap.Diagram.prototype._elementsForKeyword=function(a){var b=this.element,c=[];if(GOMap.IE)for(var d=b.ownerDocument.getElementsByTagNameNS(svgns,"*"),e=0;e<d.length;e++){var f=d[e].getAttribute("keyword");f==a&&c.push(d[e])}else c=this._execute_xpath(b,"//*[@keyword = '"+a+"']",b.ownerDocument);return c},GOMap.Diagram.prototype._execute_xpath=function(a,b,c){var d=[],e=0;if(c.evaluate)for(xpath_result=c.evaluate(b,a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);null!==(a_result=xpath_result.snapshotItem(e));)d.push(a_result),e++;else for(xpath_result=a.selectNodes(b),e=0;e<xpath_result.length;e++)d[e]=xpath_result.item(e);return d},GOMap.Diagram.prototype._recurse=function(a,b){for(var c=0;c<a.length;c++){var d=b.call(this,a[c]);d&&a[c].childNodes.length>0&&this._recurse(a[c].childNodes,b)}},GOMap.Diagram.prototype._cacheStyle=function(a){if(!a.id){var b="svg"+(new Date).getTime().toString()+Math.floor(1e3*Math.random());a.setAttribute("id",b)}null===this._styles_cache[a.id]&&a.style&&a.id&&(!a.style.stroke||a.style.strokeWidth||a.style.getPropertyValue("stroke-width")||(a.style.strokeWidth="1"),this._styles_cache[a.id]={stroke:a.style.stroke||a.style.getPropertyValue("stroke"),"stroke-width":a.style.strokeWidth||a.style.getPropertyValue("stroke-width")||"0px",opacity:a.style.getPropertyValue("opacity"),"fill-opacity":a.style.fillOpacity||a.style.getPropertyValue("fill-opacity"),"stroke-opacity":a.style.strokeOpacity||a.style.getPropertyValue("stroke-opacity")})},GOMap.Diagram.prototype._restoreStyle=function(a){if(a.style&&this._styles_cache[a.id]){var b=this._styles_cache[a.id];for(var c in{"stroke-width":null,opacity:null,stroke:null,"fill-opacity":null,"stroke-opacity":null})GOMap.IE&&!b[c]||a.style.setProperty(c,b[c],null)}},GOMap.Diagram.prototype._outlineElement=function(a){if(a.style){this._cacheStyle(a);var b=this._calculateColorForElement(a);a.style.setProperty("stroke",b,null),a.style.setProperty("stroke-width",1,null),a.style.setProperty("stroke-opacity",1,null)}},GOMap.Diagram.prototype._calculateColorForElement=function(a){var b,c="pat",d=0;if(a._animates){for(b=0;b<a._animates.length;b++)a.removeChild(a._animates[b]);a._animates=null}for(var e in a._highlighted)a._highlighted&&a._highlighted[e]===!0&&(c+="_"+e,d++);var f=document.createElementNS(svgns,"animate").beginElement;if(1==d)return c.split(/_/)[1];if(f){var g=this._buildAnimatedColor(c,a.id);for(b=0;b<g.length;b++)a.appendChild(g[b]);return g[0].beginElement(),a._animates=g,c.split(/_/)[1]}return this._buildPattern(c)},GOMap.Diagram.prototype._buildPattern=function(a){var b=a.split("_");b.shift(),this._cached_patterns=this._cached_patterns||{};var c=a.replace(/#/g,"");if(this._cached_patterns[c])return"url(#"+c+")";var d=this.element,e=d.ownerDocument.getElementsByTagNameNS(svgns,"defs")[0];e||(e=document.createElementNS(svgns,"defs"),d.appendChild(e));var f=document.createElementNS(svgns,"pattern");f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("width","30"),f.setAttribute("height","30"),f.setAttribute("viewBox","0 0 100 100"),f.setAttribute("patternUnits","userSpaceOnUse"),f.setAttribute("patternTransform","rotate(45)"),f.setAttribute("id",c);for(var g=100/b.length,h=0,i=0;i<b.length;i++){var j=document.createElementNS(svgns,"rect");j.setAttribute("x",h),h+=g,j.setAttribute("y",0),j.setAttribute("width",g),j.setAttribute("height",100),j.setAttribute("fill",b[i]),f.appendChild(j)}return e.appendChild(f),this._cached_patterns[c]=!0,"url(#"+c+")"},GOMap.Diagram.prototype._buildAnimatedColor=function(a,b){var c=a.split("_");c.shift(),this._cached_patterns=this._cached_patterns||{};var d=a.replace(/#/g,"");if(this._cached_patterns[d])return"url(#"+d+")";d=b+d;var e=this.element,f=e.ownerDocument.getElementsByTagNameNS(svgns,"defs")[0];f||(f=document.createElementNS(svgns,"defs"),e.appendChild(f));for(var g=[],h=0;h<c.length;h++){var i=document.createElementNS(svgns,"animate");i.setAttribute("id",d+h),i.setAttribute("from",c[h]);var j="";j=c.length<=h+1?c[0]:c[h+1],i.setAttribute("to",j);var k="";k=0===h?"SVGLoad;indefinite;"+(d+(c.length-1))+".end":d+(h-1)+".end",i.setAttribute("attributeType","CSS"),i.setAttribute("attributeName","stroke"),i.setAttribute("begin",k),i.setAttribute("dur","1s"),g.push(i)}return g},GOMap.Diagram.prototype._highlightElement=function(a){!a.style||"g"!=a.nodeName&&null===a.id||(this._cacheStyle(a),"path"!=a.nodeName&&"circle"!=a.nodeName&&"ellipse"!=a.nodeName||(a.setAttribute("opacity","1"),a.style.setProperty("opacity",1,null)),a.setAttribute("fill-opacity","1"),a.setAttribute("stroke-opacity","1"),a.style.setProperty&&(a.style.setProperty("fill-opacity",1,null),a.style.setProperty("stroke-opacity",1,null)))},GOMap.Diagram.prototype._forceOpacity=function(){for(var a=this.element,b=a.suspendRedraw(5e3),c=a.ownerDocument.getElementsByTagNameNS(svgns,"*"),d=0;d<c.length;d++)"svg"!=c[d].nodeName&&(c[d].parentNode&&c[d].parentNode.parentNode&&"defs"==c[d].parentNode.parentNode.nodeName||"defs"==c[d].nodeName||c[d].parentNode&&"defs"==c[d].parentNode.nodeName||("path"==c[d].nodeName?(c[d].setAttribute("opacity","0.4"),c[d].style.opacity=.4):(c[d].setAttribute("fill-opacity","0.3"),c[d].setAttribute("stroke-opacity","0.2"),c[d].style&&(c[d].style.fillOpacity=.3,c[d].style.strokeOpacity=.2))));a.unsuspendRedraw(b)},GOMap.Diagram.Dragger=function(){this.oX=0,this.oY=0,this.dX=0,this.dY=0,this.dragging=!1,this.targetElement=null},GOMap.Diagram.Dragger.prototype.applyToElement=function(a){var b=this;b.enabled=!0;var c=[];"svg"==a.nodeName?(a.getPosition=function(){var b=a.currentTranslate.x,c=a.currentTranslate.y;return[b,c]},a.shiftPosition=function(c,d){var e,f,g,h,i={x:c,y:d},j=1,k=this.getAttribute("viewBox");if(k){var l=this.getAttribute("viewBox").split(" ");j=parseFloat(this.width.baseVal.value)/parseFloat(l[2]),e=0,f=parseInt(l[1],10),g=parseInt(l[2],10),h=parseInt(l[3],10)}else e=0,f=0,g=a.width,h=a.height;a.style.GomapScrollLeftMargin&&(e+=a.style.GomapScrollLeftMargin),b.dragging&&(i.x=j*(i.x-b.oX),i.y=j*(i.y-b.oY),i.x+=b.dX,i.y+=b.dY,i.y=0),a._snapback&&(clearTimeout(a._snapback),a._snapback=null),i.x>j*e&&(a._snapback=setTimeout(function(){var c;if(Math.abs(a.currentTranslate.x-j*e)>35){var d=.95*(a.currentTranslate.x-j*e);if(j*e>d&&(d=j*e),a.setCurrentTranslateXY(d,0),window.requestAnimFrame(arguments.callee,a),document.createEvent){var c=document.createEvent("Events");c.initEvent("panstart",!1,!0),a.dispatchEvent(c)}}else{if(a.setCurrentTranslateXY(j*e,0),document.createEvent){var c=document.createEvent("Events");c.initEvent("pan",!1,!0),a.dispatchEvent(c)}b.dragging||bean.fire(a,"panend"),a._snapback=null}},300));var m=j*(g-2*e);if(0===e&&(m*=.9),i.x<0&&Math.abs(i.x)>m&&(a._snapback=setTimeout(function(){var c;if(Math.abs(a.currentTranslate.x- -1*m)>35){var d=.95*a.currentTranslate.x;d>-1*m&&(d=-1*m),a.setCurrentTranslateXY(d,0),window.requestAnimFrame(arguments.callee,a),document.createEvent&&(c=document.createEvent("Events"),c.initEvent("panstart",!1,!0),a.dispatchEvent(c))}else a.setCurrentTranslateXY(-1*m,0),document.createEvent&&(c=document.createEvent("Events"),c.initEvent("pan",!1,!0),a.dispatchEvent(c)),b.dragging||bean.fire(a,"panend"),a._snapback=null},300)),i.y>j*f&&(i.y=j*f),Math.abs(i.y)>.5*j*h&&(i.y=-.5*j*h),this.setCurrentTranslateXY?this.setCurrentTranslateXY(i.x,i.y):this.currentTranslate.setXY?this.currentTranslate.setXY(i.x,i.y):(this.currentTranslate.x=i.x,this.currentTranslate.y=i.y),document.createEvent){var n=document.createEvent("Events");n.initEvent("pan",!1,!0),this.dispatchEvent(n)}}):(a.getPosition=function(){return[this.scrollLeft,this.scrollTop]},a.shiftPosition=function(a,c){if(this.scrollLeft=b.dX+(b.oX-a),this.scrollTop=b.dY+(b.oY-c),document.createEvent){var d=document.createEvent("Events");d.initEvent("pan",!1,!0),this.dispatchEvent(d)}});var d=function(c){if(!b.enabled)return!0;var d=b.targetElement?b.targetElement:a,f=e(c);if(b.dragging=!0,b.targetElement)return b.oX=f[0],b.oY=f[1],b.dX=b.targetElement.scrollLeft,b.dY=b.targetElement.scrollTop,void c.preventDefault(!0);var g=a.createSVGPoint();f=e(c),g.x=f[0],g.y=f[1];var h=this.firstElementChild.getScreenCTM();b.matrix=h.inverse(),g=g.matrixTransform(b.matrix),b.dX=a.getPosition()[0],b.dY=a.getPosition()[1],b.oX=g.x,b.oY=g.y,c.preventDefault(!0),document.createEvent&&(b.clicktimeout=setTimeout(function(){var a=document.createEvent("Events");b.clicktimeout=null,a.initEvent("panstart",!1,!0),d.dispatchEvent(a)},200))},e=function(a){var c=0,d=0;return a||(a=window.event),a.pageX||a.pageY?(c=a.pageX,d=a.pageY):(a.clientX||a.clientY)&&(c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),b.targetElement&&(c=a.screenX,d=a.screenY),[c,d]},f=function(c){this.style.cursor="url(http://maps.gstatic.com/intl/en_us/mapfiles/openhand_8_8.cur)";var d=e(c);b.clicktimeout&&Math.abs(d[0]-b.oX)<10&&j(),b.dragging&&(this.style.cursor="url(http://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur)",a.shiftPosition(d[0],d[1]),c.preventDefault(!0))},g=function(c){b.dragging=!0;var d=e(c);b.oX=d[0],b.oY=d[1],b.dX=a.getPosition()[0],b.dY=a.getPosition()[1],c.preventDefault(!0);var f=b.targetElement?b.targetElement:a;if(document.createEvent){var g=document.createEvent("Events");g.initEvent("panstart",!1,!0),f.dispatchEvent(g)}},h=function(a){return b.enabled?void(b.dragging&&i.call(this,a)):(this.style.cursor="pointer",!0)},i=function(c){var d=e(c);if(b.targetElement)return void b.targetElement.shiftPosition(d[0],d[1]);var f=a._cachedpoint||a.createSVGPoint();a._cachedpoint=f,d=e(c),f.x=d[0],f.y=d[1];var g=a._cachedrctm||a.firstElementChild.getScreenCTM();a._cachedrctm=g,f=f.matrixTransform(b.matrix),a.shiftPosition(f.x,f.y)},j=function(c){if(b.clicktimeout&&(clearTimeout(b.clicktimeout),b.clicktimeout=null),!b.enabled)return!0;b.oX=0,b.oY=0,b.dX=null,b.dY=null,b.dragging=!1,c.preventDefault(!0);var d=b.targetElement?b.targetElement:a;d._snapback||bean.fire(d,"panend",!0)},k=function(a){if(!b.dragging||!b.enabled)return!0;if(this==b.targetElement&&j(a),a.target==this||a.currentTarget){for(var c=a.relatedTarget?a.relatedTarget:a.toElement;null!==c;){if(c==this)return;c=c.parentNode}j(a)}};a.setAttribute("cursor","pointer"),a.addEventListener||(a.addEventListener=function(a,b,c){this.attachEvent(a,b)}),a.addEventListener("touchstart",function(d){if(b.enabled){var f=b.targetElement?b.targetElement:a;if(b.momentum&&(window.clearTimeout(b.momentum),b.momentum=null),1==d.touches.length){var g,h=e(d.touches[0]);if("svg"==f.nodeName){g=f.createSVGPoint(),g.x=h[0],g.y=h[1];var i=this.getScreenCTM();b.matrix=i.inverse(),g=g.matrixTransform(b.matrix)}else g.x=h[0],g.y=h[1];if(b.oX=g.x,b.oY=g.y,b.dragging=!0,b.dX=f.getPosition()[0],b.dY=f.getPosition()[1],b._momentum_shrinker=setInterval(function(){c.shift()},20),document.createEvent){var j=document.createEvent("Events");j.initEvent("panstart",!1,!0),f.dispatchEvent(j)}d.preventDefault()}}},!1),a.addEventListener("touchmove",function(d){b.momentum&&(window.clearTimeout(b.momentum),b.momentum=null),1!=d.touches.length&&(b.dragging=!1);var f=b.targetElement?b.targetElement:a,g=e(d.touches[0]);if(g&&b.matrix){var h;if("svg"==f.nodeName?(h=f.createSVGPoint(),h.x=g[0],h.y=g[1],h=h.matrixTransform(b.matrix)):(h.x=g[0],h.y=g[1]),b.dragging&&6*Math.abs(b.oX-h.x)>Math.abs(b.oY-h.y)&&d.preventDefault(),!b.dragging)return b.oX=0,b.oY=0,b.dX=null,void(b.dY=null);c.length>3&&c.splice(2),f.shiftPosition(h.x,h.y),c.push(f.getPosition()[0]-b.dX)}},!1);var l=function(d){if(!b.enabled)return!0;if(!b.dragging)return clearInterval(b._momentum_shrinker),void j(d);var e=b.targetElement?b.targetElement:a,f=0;if(c.length>0){var g=c[0];c.forEach(function(a){"undefined"!=typeof g&&(f+=a-g),g=a}),f/=c.length}var h=e.getPosition()[0],i=f;b.dragging=!1,b.momentum&&window.clearTimeout(b.momentum),b.momentum=1,function(){h=e.getPosition()[0],b.dragging?h+=b.oX-b.dX:(b.oX=0,b.dX=0),e.shiftPosition(h+f,0),h+=f,f=.5*f,f>0&&Math.abs(i/f)<10?window.requestAnimFrame(arguments.callee,e):(b.momentum=null,clearInterval(b._momentum_shrinker),j(d))}()};a.addEventListener("touchend",l,!1),"svg"==a.nodeName?(a.addEventListener("mousedown",d,!1),a.addEventListener("mousemove",h,!1),a.addEventListener("mouseup",j,!1),a.addEventListener("mouseout",k,!1),b.targetElement&&b.targetElement.addEventListener("mouseout",k,!1)):(a.addEventListener("mousedown",g,!1),a.addEventListener("mousemove",f,!1),a.addEventListener("mouseup",j,!1),a.addEventListener("mouseout",k,!1))},GOMap.Diagram.addTouchZoomControls=function(a,b){GOMap.Diagram.Dragger.prototype.addTouchZoomControls.call({enabled:!0},a,b)},GOMap.Diagram.Dragger.prototype.addTouchZoomControls=function(a,b){var c=this,d=function(a){var b=0,d=0;return a||(a=window.event),a.pageX||a.pageY?(b=a.pageX,d=a.pageY):(a.clientX||a.clientY)&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),c.targetElement&&(b=a.screenX,d=a.screenY),[b,d]};b.addEventListener("touchstart",function(e){if(c.enabled&&2==e.touches.length){var f,g=d(e.touches[0]),h=d(e.touches[1]);if("svg"==b.nodeName){f=b.createSVGPoint(),f.x=.5*(g[0]+h[0]),f.y=.5*(g[1]+h[1]);var i=this.getScreenCTM();c.matrix=i.inverse(),f=f.matrixTransform(c.matrix)}else f.x=.5*(g[0]+h[0]),f.y=.5*(g[1]+h[1]);a.zoomCenter=f,e.preventDefault()}},!1),Hammer(b).on("touch",function(d){if(c.enabled){var e=a.zoom,f=function(b){a.zoomCenter&&(a.zoom=e*b.gesture.scale),b.preventDefault()};Hammer(b).on("pinch",f,!1),Hammer(b).on("release",function(c){Hammer(b).off("pinch",f),Hammer(b).off("release",arguments.callee),a.zoomCenter=null,a.zoomLeft=null,bean.fire(a,"gestureend")},!1),d.preventDefault()}},!1)},GOMap.Diagram.addZoomControls=function(a,b,c,d,e){b=b||0,c=c||10,d=d||.5,e=e||a.zoom||b;var f=document.createElement("div"),g=document.createElement("input");g.setAttribute("type","button"),g.setAttribute("value","+");var h=document.createElement("input");h.setAttribute("type","button"),h.setAttribute("value","-");var i=document.createElement("input");i.setAttribute("type","button"),i.setAttribute("value","Reset"),f.appendChild(i),i.addEventListener("click",function(){a.zoom=a.defaultZoom||e},!1);var j=document.createElement("input");if(j.setAttribute("min",b),j.setAttribute("max",c),j.setAttribute("step",d),j.setAttribute("value",e),j.setAttribute("type","range"),j.setAttribute("style","-webkit-appearance: slider-horizontal; width: 100%; position: absolute; top: 0px; bottom: 0px; margin-top: 0.5em; left: 100%; margin-left: -0.5em;"),"range"==j.type){j.addEventListener("change",function(){a.zoom=this.value},!1);var k=null;a.addEventListener?k=a.addEventListener:a.bind&&(k=a.bind),k.apply(a,["zoomChange",function(){j.value=a.zoom},!1]),i.style.margin="0px",i.style.display="block",i.style.position="absolute",i.style.top="0px",f.appendChild(j),f.style.height="100%"}else{if(!g.addEventListener){var l=function(a,b){this.attachEvent(a,b)};g.addEventListener=l,i.addEventListener=l,h.addEventListener=l}g.addEventListener("click",function(){a.zoom+=d},!1),h.addEventListener("click",function(){a.zoom-=d},!1),g.style.margin="0px",g.style.display="block",g.style.position="absolute",g.style.top="0px",g.style.left="29px",h.style.margin="0px",h.style.display="block",h.style.position="absolute",h.style.top="0px",i.style.margin="0px",i.style.display="block",i.style.position="absolute",i.style.top="23px",i.style.left="3px",f.appendChild(h),f.appendChild(g),f.appendChild(i)}return this.addScrollZoomControls(a,f,d),f},GOMap.Diagram.addScrollBar=function(a,b,c){for(var d=document.createElement("div");c.childNodes.length>0;)c.removeChild(c.firstChild);c.appendChild(d),c.style.position||(c.style.position="relative"),c.style.overflowX="scroll",c.style.overflowY="hidden",d.style.position="absolute",d.style.left="0px",d.style.width="100%",d.style.height="100%",bean.remove(c,"scroll"),bean.remove(c,"mouseenter"),bean.add(c,"mouseenter",function(){d.cached_width=d.clientWidth,e=!0,c.scrollLeft+=1,c.scrollLeft-=1,setTimeout(function(){e=!1},0),bean.remove(c,"scroll",f),bean.add(c,"scroll",f)});var e=!1;window.matchMedia&&window.matchMedia("print").addListener(function(a){e=!0,setTimeout(function(){e=!1},0)});var f=function(){if(!e&&console){if(document.createEvent){var f=document.createEvent("Events");f.initEvent("panstart",!1,!0),b.dispatchEvent(f)}var g=d.cached_width||d.clientWidth;a.setLeftPosition(parseInt(c.scrollLeft*a.getTotalLength()/g)),bean.fire(b,"panend")}};bean.add(c,"scroll",f),bean.add(b,"pan",function(){var b=100*a.getTotalLength()/a.getVisibleLength();d.style.width=parseInt(b)+"%";var e=d.clientWidth;d.cached_width=e;var g=parseInt(e*(a.getLeftPosition()/a.getTotalLength()));bean.remove(c,"scroll",f),setTimeout(function(){c.scrollLeft=g},0)})},GOMap.Diagram.addScrollZoomControls=function(a,b,c){c=c||.5;var d=this,e=function(a,b,c){"string"==typeof a&&(a=document.getElementById(a)),null!==a&&(a.addEventListener?("mousewheel"==b&&(a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener("wheel",c,!1)),a.addEventListener(b,c,!1)):a.attachEvent&&a.attachEvent("on"+b,c))},f=function(a){var c=0,e=0;a||(a=window.event),a.pageX||a.pageY?(c=a.pageX,e=a.pageY):(a.clientX||a.clientY)&&(c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);var f={};if("svg"==b.nodeName){f=b.createSVGPoint(),f.x=c,f.y=e;var g=b.firstElementChild.getScreenCTM();d.matrix=g.inverse(),f=f.matrixTransform(d.matrix)}else f.x=c,f.y=e;return f},g=function(b){b=b?b:window.event;var d=b.detail?-1*b.detail:b.wheelDelta;return d||(d=b.deltaY),a.zoomCenter=f(b),d>0?a.zoom=a.zoom+=c:a.zoom=a.zoom-=c,b.preventDefault&&b.preventDefault(),b.returnValue=!1,b.stopPropagation(),!1},h=!1;navigator.userAgent.indexOf("Gecko")>=0&&(h=parseFloat(navigator.userAgent.split("Firefox/")[1])||void 0),h&&"undefined"!=typeof svgweb&&"native"==svgweb.getHandlerType()?e(b,"mousewheel",g):e(b,"mousewheel",g),e(b,"mousemove",function(b){a.zoomCenter&&Math.abs(a.zoomCenter.x-f(b).x)>100&&(a.zoomCenter=null,a.zoomLeft=null)})};